<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAIF TRADING BOT ‚Äî Secure</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6C5CE7;
            --primary-dark: #5649C7;
            --secondary: #00D1A0;
            --accent: #FF5E7D;
            --dark: #0F0C29;
            --light: #F5F7FF;
            --glass: rgba(255,255,255,.1);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html, body {
            margin: 0;
            padding: 0;
            background: var(--dark);
            color: var(--light);
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            user-select: none;
        }
        
        .container {
            max-width: 520px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 18px;
            position: relative;
            z-index: 1;
        }
        
        .logo {
            width: 86px;
            height: 86px;
            margin: 0 auto 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            box-shadow: 0 5px 20px rgba(108,92,231,.5);
            border: 3px solid rgba(255,255,255,.2);
            position: relative;
            overflow: hidden;
        }
        
        .logo::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to bottom right, rgba(255,255,255,0) 0%, rgba(255,255,255,.12) 50%, rgba(255,255,255,0) 100%);
            transform: rotate(30deg);
            animation: shine 3s infinite;
        }
        
        .naif-text {
            font-weight: 800;
            letter-spacing: 2px;
            font-size: 22px;
        }
        
        .app-name {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 6px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
            position: relative;
        }
        
        .app-badge {
            position: absolute;
            top: -8px;
            right: -28px;
            font-size: 12px;
            background: var(--accent);
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            transform: rotate(15deg);
            display: none;
        }
        
        .stats {
            background: rgba(30,33,48,.75);
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            font-size: 14px;
            margin-bottom: 14px;
            border: 1px solid var(--glass);
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }
        
        .stats::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .signal-count {
            color: var(--secondary);
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0,209,160,.5);
            animation: pulseGlow 2s infinite;
            position: relative;
        }
        
        .section {
            background: rgba(26,29,40,.85);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 14px;
            border: 1px solid var(--glass);
            backdrop-filter: blur(5px);
            transition: .3s;
            box-shadow: 0 5px 15px rgba(0,0,0,.12);
        }
        
        .section:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,.22);
        }
        
        .section-title {
            font-size: 16px;
            margin-bottom: 12px;
            color: var(--secondary);
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .section-info {
            color: rgba(255,255,255,.6);
            font-size: 12px;
            cursor: help;
        }
        
        .platform-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .platform-btn {
            padding: 12px;
            border-radius: 10px;
            background: rgba(0,0,0,.3);
            border: 1px solid var(--glass);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: .3s;
            text-align: center;
            min-height: 60px;
            position: relative;
            overflow: hidden;
        }
        
        .platform-btn.selected {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(108,92,231,.4);
        }
        
        .platform-icon {
            width: 24px;
            height: 24px;
            object-fit: contain;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,.3));
        }
        
        .market-toggle {
            display: flex;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--glass);
            position: relative;
        }
        
        .market-toggle::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 1px;
            height: 100%;
            background: var(--glass);
        }
        
        .market-btn {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: rgba(0,0,0,.3);
            cursor: pointer;
            transition: .3s;
            position: relative;
            z-index: 1;
        }
        
        .market-btn.selected {
            background: var(--primary);
        }
        
        .custom-select {
            position: relative;
            margin-bottom: 5px;
        }
        
        .custom-select select {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border-radius: 10px;
            border: 1px solid var(--glass);
            background: rgba(0,0,0,.3);
            color: #fff;
            font-size: 14px;
            appearance: none;
            cursor: pointer;
            transition: .3s;
        }
        
        .custom-select select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(108,92,231,.3);
        }
        
        .custom-select::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 15px;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid #fff;
            transform: translateY(-50%);
            pointer-events: none;
        }
        
        .time-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 10px;
        }
        
        .time-btn {
            padding: 10px;
            border-radius: 8px;
            background: rgba(0,0,0,.3);
            font-size: 13px;
            text-align: center;
            border: 1px solid var(--glass);
            cursor: pointer;
            transition: .3s;
        }
        
        .time-btn.selected {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 3px 10px rgba(108,92,231,.3);
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: #fff;
            font-weight: 700;
            font-size: 15px;
            margin: 16px 0;
            cursor: pointer;
            transition: .3s;
            box-shadow: 0 5px 15px rgba(108,92,231,.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(108,92,231,.4);
        }
        
        .signal-modal, .license-modal, .terms-modal, .security-lock {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 100;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,.82);
            backdrop-filter: blur(6px);
            animation: fadeIn .3s;
        }
        
        .signal-box, .license-box, .terms-box {
            background: rgba(26,29,40,.95);
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 380px;
            text-align: center;
            border: 1px solid var(--glass);
            box-shadow: 0 10px 30px rgba(0,0,0,.3);
            animation: modalIn .4s;
            position: relative;
        }
        
        .signal-box::before, .license-box::before, .terms-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 15px 15px 0 0;
        }
        
        .signal-direction {
            font-size: 42px;
            font-weight: 800;
            margin: 15px 0;
            text-transform: uppercase;
            position: relative;
            display: inline-block;
        }
        
        .signal-up {
            color: var(--secondary);
            animation: pulse 2s infinite;
        }
        
        .signal-down {
            color: #FF4D6D;
            animation: pulse 2s infinite;
        }
        
        .signal-details {
            font-size: 16px;
            margin: 20px 0;
            background: rgba(0,0,0,.2);
            padding: 15px;
            border-radius: 10px;
            border-left: 3px solid var(--primary);
        }
        
        .signal-details div {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            gap: 12px;
            align-items: center;
        }
        
        .flagpair {
            font-size: 20px;
            display: inline-flex;
            gap: 6px;
            align-items: center;
        }
        
        .license-input {
            width: 100%;
            padding: 14px;
            margin: 15px 0;
            border-radius: 10px;
            border: 1px solid var(--glass);
            background: rgba(0,0,0,.3);
            color: #fff;
            font-size: 15px;
            text-align: center;
            letter-spacing: 1px;
            transition: .3s;
        }
        
        .checkbox-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            font-size: 13px;
        }
        
        .checkbox-container input {
            margin-inline-end: 10px;
            width: 16px;
            height: 16px;
            accent-color: var(--primary);
            cursor: pointer;
        }
        
        .contact-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .contact-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            color: #fff;
            font-size: 22px;
            text-decoration: none;
            transition: .3s;
            box-shadow: 0 5px 15px rgba(0,0,0,.2);
            position: relative;
            overflow: hidden;
        }
        
        .telegram-btn {
            background: linear-gradient(135deg, #0088cc, #00A8E8);
        }
        
        .notification-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--accent);
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(255,94,125,.4);
            animation: pulse 2s infinite;
        }
        
        .lang-switch {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 8px;
            z-index: 11;
        }
        
        .lang-switch button {
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid var(--glass);
            background: rgba(26,29,40,.7);
            color: #fff;
            cursor: pointer;
            transition: .2s;
        }
        
        .lang-switch button.active {
            background: var(--primary);
        }
        
        .recent-signals {
            margin-top: 14px;
            background: rgba(30,33,48,.8);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--glass);
        }
        
        .recent-title {
            font-size: 14px;
            color: var(--secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .signal-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .signal-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            background: rgba(0,0,0,.2);
            border-radius: 6px;
            font-size: 13px;
            border-inline-start: 3px solid;
        }
        
        .signal-item.up {
            border-inline-start-color: var(--secondary);
        }
        
        .signal-item.down {
            border-inline-start-color: #FF4D6D;
        }
        
        .signal-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .security-lock .lock-box {
            background: rgba(26,29,40,.96);
            border: 1px solid var(--glass);
            border-radius: 12px;
            padding: 24px;
            max-width: 380px;
            text-align: center;
        }
        
        .security-lock .lock-title {
            font-weight: 700;
            margin: 8px 0 4px;
        }
        
        .security-lock .lock-note {
            font-size: 13px;
            color: rgba(255,255,255,.85);
        }
        
        .lock-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 12px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 20px;
            border-radius: 8px;
            background: var(--dark);
            color: #fff;
            box-shadow: 0 5px 15px rgba(0,0,0,.3);
            z-index: 1000;
            opacity: 0;
            transition: .3s;
            border-inline-start: 4px solid;
            max-width: 90%;
            text-align: center;
        }
        
        .notification.show {
            opacity: 1;
            transform: translate(-50%,0);
        }
        
        .notification.success {
            border-inline-start-color: var(--secondary);
        }
        
        .notification.error {
            border-inline-start-color: #FF4D6D;
        }
        
        .notification.info {
            border-inline-start-color: var(--primary);
        }
        
        .price-card {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 8px;
            align-items: center;
            background: rgba(0,0,0,.3);
            padding: 12px;
            border-radius: 10px;
            border: 1px solid var(--glass);
        }
        
        .price-main {
            font-size: 22px;
            font-weight: 800;
        }
        
        .price-change.up {
            color: var(--secondary);
        }
        
        .price-change.down {
            color: #FF4D6D;
        }
        
        .price-sub {
            font-size: 12px;
            color: rgba(255,255,255,.75);
        }
        
        .flag-inline {
            font-size: 22px;
            margin-inline-end: 6px;
        }
        
        .price-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #aaa;
            display: inline-block;
            margin-inline-start: 8px;
        }
        
        .dot-live {
            background: #22c55e;
            box-shadow: 0 0 0 0 rgba(34,197,94,.7);
            animation: ping 1.6s infinite;
        }
        
        @keyframes ping {
            0% { box-shadow: 0 0 0 0 rgba(34,197,94,.7); }
            70% { box-shadow: 0 0 0 10px rgba(34,197,94,0); }
            100% { box-shadow: 0 0 0 0 rgba(34,197,94,0); }
        }
        
        @keyframes pulse {
            0% { opacity: .9; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: .9; transform: scale(1); }
        }
        
        @keyframes pulseGlow {
            0% { text-shadow: 0 0 5px rgba(0,209,160,.5); }
            50% { text-shadow: 0 0 15px rgba(0,209,160,.8); }
            100% { text-shadow: 0 0 5px rgba(0,209,160,.5); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalIn {
            from { opacity: 0; transform: translateY(-20px) scale(.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        @keyframes shine {
            to { transform: translateX(100%) rotate(30deg); }
        }
        
        .connection-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            z-index: 10;
            background: rgba(0,0,0,.7);
            backdrop-filter: blur(5px);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-connected {
            background: #22c55e;
        }
        
        .status-disconnected {
            background: #ef4444;
        }
        
        .status-connecting {
            background: #f59e0b;
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="connection-status" id="connection-status">
        <span class="status-dot status-disconnected" id="status-dot"></span>
        <span id="status-text">ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ</span>
    </div>

    <div class="lang-switch" aria-label="Language switch">
        <button id="btn-en">EN</button>
        <button id="btn-ar" class="active">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
    </div>

    <div class="notification-badge" id="notif-badge" title="Notifications">
        <i class="fas fa-bell"></i>
    </div>

    <div class="container" id="app">
        <div class="header">
            <div class="logo" aria-label="NAIF icon">
                <span class="naif-text">NAIF</span>
            </div>
            <div class="app-name"><span data-i18n="appName">NAIF TRADING BOT</span><span class="app-badge" id="master-badge" style="display: inline-block;">MASTER</span></div>
            <div class="stats">
                <i class="fas fa-chart-line"></i> <span data-i18n="signals">ÿßŸÑÿ•ÿ¥ÿßÿ±ÿßÿ™</span>: <span class="signal-count" id="signal-count">286,437</span> |
                <span data-i18n="accuracy">ÿßŸÑÿØŸÇÿ©</span>: <span class="accuracy-badge">96.8%</span>
            </div>
        </div>

        <!-- Live Price Section -->
        <div class="section">
            <div class="section-title">
                <span><i class="fas fa-coins"></i> <span data-i18n="livePrice">ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÑÿ≠ÿ∏Ÿä</span></span>
                <span class="section-info" title="ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ">?</span>
            </div>
            <div class="price-card">
                <div>
                    <div class="price-main">
                        <span id="flag-left" class="flag-inline">üá™üá∫</span><span id="flag-right" class="flag-inline">üá∫üá∏</span>
                        <span id="price-symbol">EURUSD</span> ‚Äî <span id="price-value">‚Äî</span>
                    </div>
                    <div class="price-sub"><span id="price-time"></span></div>
                </div>
                <div style="text-align:right">
                    <div id="price-change" class="price-change">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™</div>
                    <span id="live-dot" class="price-dot"></span>
                </div>
            </div>
        </div>

        <!-- Platform -->
        <div class="section">
            <div class="section-title">
                <span><i class="fas fa-exchange-alt"></i> <span data-i18n="platform">ŸÖŸÜÿµÿ© ÿßŸÑÿ™ÿØÿßŸàŸÑ</span></span>
                <span class="section-info" title="ÿßÿÆÿ™ÿ± ŸÖŸÜÿµÿ™ŸÉ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©">?</span>
            </div>
            <div class="platform-grid">
                <div class="platform-btn selected" data-platform="quotex">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0xMiAyQTEwIDEwIDAgMDAyIDEyYTEwIDEwIDAgMDAxMCAxMGExMCAxMCAwIDAwMTAtMTBBMTAgMTAgMCAwMDEyIDJtMCAxOGE4IDggMCAwMTgtOCA4IDggMCAwMS04LTggOCA4IDAgMDE4IDggOCA4IDAgMDEtOCA4eiIvPjxwYXRo IGQ9Ik0xMiA3bDMgNi02LjEuMDMiLz48L3N2Zz4=" class="platform-icon" alt="Quotex"><span>Quotex</span>
                </div>
                <div class="platform-btn" data-platform="pocketoption">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0xMCA0SDRjLTEuMTEgMC0yIC44OS0yIDJ2MTJjMCAxLjExLjg5IDIgMiAyaDE2YzEuMTEgMCAyLS44OSAyLTJ2LTguMDRjMC0xLjExLS44OS0yLTItMmgtOGwtMi0yeiIvPjwvc3ZnPg==" class="platform-icon" alt="Pocket Option"><span>Pocket Option</span>
                </div>
                <div class="platform-btn" data-platform="binolla">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0xMiAyQTEwIDEwIDAgMDAyIDEyYTEwIDEwIDAgMDAxMCAxMGExMCAxMCAwIDAwMTAtMTBBMTAgMTAgMCAwMDEyIDJtLTIgMTVsLTUtNSA0LTQgNyA3LTUgNUw3IDE0bDMtM3oiLz48L3N2Zz4=" class="platform-icon" alt="Binolla"><span>Binolla</span>
                </div>
            </div>
        </div>

        <!-- Market -->
        <div class="section">
            <div class="section-title">
                <span><i class="fas fa-chart-line"></i> <span data-i18n="marketType">ŸÜŸàÿπ ÿßŸÑÿ≥ŸàŸÇ</span></span>
                <span class="section-info" title="ÿßŸÑÿ≠Ÿä ÿ£ŸÉÿ´ÿ± ÿ™ÿ∞ÿ®ÿ∞ÿ®Ÿãÿßÿå ŸàOTC ÿ£ŸÉÿ´ÿ± ÿßÿ≥ÿ™ŸÇÿ±ÿßÿ±Ÿãÿß">?</span>
            </div>
            <div class="market-toggle">
                <div class="market-btn selected" id="live-market" data-i18n="live">ÿ≠Ÿä</div>
                <div class="market-btn" id="otc-market" data-i18n="otc">ÿÆÿßÿ±ÿ¨ ÿßŸÑÿ®Ÿàÿ±ÿµÿ©</div>
            </div>
        </div>

        <!-- Pair -->
        <div class="section">
            <div class="section-title">
                <span><i class="fas fa-money-bill-wave"></i> <span data-i18n="pair">ÿ≤Ÿàÿ¨ ÿßŸÑÿπŸÖŸÑÿ©</span></span>
                <span class="section-info" title="ÿßÿÆÿ™ÿ± ÿßŸÑÿ≤Ÿàÿ¨ ÿßŸÑŸÖÿ±ÿßÿØ ÿ™ÿØÿßŸàŸÑŸá">?</span>
            </div>
            <div class="custom-select">
                <select id="currency-pair" aria-label="Currency pair select">
                    <option value="EURUSD">EURUSD</option>
                    <option value="GBPUSD">GBPUSD</option>
                    <option value="USDJPY">USDJPY</option>
                    <option value="USDCHF">USDCHF</option>
                    <option value="AUDUSD">AUDUSD</option>
                    <option value="USDCAD">USDCAD</option>
                    <option value="EURGBP">EURGBP</option>
                    <option value="EURJPY">EURJPY</option>
                    <option value="GBPJPY">GBPJPY</option>
                    <option value="USDTRY">USDTRY</option>
                    <option value="GOLD">GOLD</option>
                    <option value="SILVER">SILVER</option>
                    <option value="BTC/USD">BTCUSD</option>
                    <option value="ETH/USD">ETHUSD</option>
                </select>
            </div>
        </div>

        <!-- Timeframe -->
        <div class="section">
            <div class="section-title">
                <span><i class="fas fa-clock"></i> <span data-i18n="timeframe">ÿßŸÑÿ•ÿ∑ÿßÿ± ÿßŸÑÿ≤ŸÖŸÜŸä</span></span>
                <span class="section-info" title="ÿßÿÆÿ™ÿ± ÿßŸÑÿ•ÿ∑ÿßÿ± ÿßŸÑŸÖŸÜÿßÿ≥ÿ®">?</span>
            </div>
            <div class="time-options">
                <div class="time-btn selected" data-time="60">1m</div>
                <div class="time-btn" data-time="300">5m</div>
                <div class="time-btn" data-time="900">15m</div>
                <div class="time-btn" data-time="1800">30m</div>
                <div class="time-btn" data-time="3600">1h</div>
                <div class="time-btn" data-time="7200">2h</div>
            </div>
        </div>

        <button class="btn" id="generate-btn"><i class="fas fa-bolt"></i> <span data-i18n="generate">ÿ™ŸàŸÑŸäÿØ ÿ•ÿ¥ÿßÿ±ÿ©</span></button>

        <div class="recent-signals">
            <div class="recent-title">
                <span><i class="fas fa-history"></i> <span data-i18n="recent">ÿ¢ÿÆÿ± ÿßŸÑÿ•ÿ¥ÿßÿ±ÿßÿ™</span></span>
                <span class="section-info" title="ÿ¢ÿÆÿ± 5 ÿ•ÿ¥ÿßÿ±ÿßÿ™">?</span>
            </div>
            <div class="signal-list" id="signal-list">
                <div class="signal-item down">
                    <div class="signal-left">
                        <span class="signal-pair">EURUSD</span>
                        <span class="signal-time">1:20:14 ÿµ</span>
                    </div>
                    <div><span>ÿ®Ÿäÿπ</span> <span>97%</span></div>
                </div>
                <div class="signal-item up">
                    <div class="signal-left">
                        <span class="signal-pair">EURUSD</span>
                        <span class="signal-time">5:27:34 ŸÖ</span>
                    </div>
                    <div><span>ÿ¥ÿ±ÿßÿ°</span> <span>92%</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signal Modal -->
    <div class="signal-modal" id="signal-modal" role="dialog" aria-modal="true">
        <div class="signal-box">
            <div class="signal-direction signal-up" id="signal-direction">ÿ¥ÿ±ÿßÿ°</div>
            <div class="signal-details">
                <div><strong data-i18n="pairLabel">ÿßŸÑÿ≤Ÿàÿ¨:</strong> <span class="flagpair"><span id="modal-flag-left">üá™üá∫</span>/<span id="modal-flag-right">üá∫üá∏</span></span> <span id="result-pair">EURUSD</span></div>
                <div><strong data-i18n="tfLabel">ÿßŸÑÿ•ÿ∑ÿßÿ±:</strong> <span id="result-time">1m</span></div>
                <div><strong data-i18n="confLabel">ÿßŸÑÿ´ŸÇÿ©:</strong> <span id="ai-confidence">92%</span></div>
                <div><strong data-i18n="expLabel">ÿ™ŸÜÿ™ŸáŸä ÿÆŸÑÿßŸÑ:</strong> <span id="expiry-time">30s</span></div>
                <div><strong data-i18n="platLabel">ÿßŸÑŸÖŸÜÿµÿ©:</strong> <span id="result-platform">Quotex</span></div>
            </div>
            <button class="btn" id="close-signal"><i class="fas fa-check"></i> <span data-i18n="executed">ÿ™ŸÖ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞</span></button>
        </div>
    </div>

    <!-- License Modal -->
    <div class="license-modal" id="license-modal" role="dialog" aria-modal="true">
        <div class="license-box">
            <h3 data-i18n="enterKey">ÿ£ÿØÿÆŸÑ ŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ</h3>
            <p data-i18n="premiumNote">ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑÿ•ÿ¥ÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©</p>
            <input type="password" class="license-input" id="license-input" placeholder="XXXX-XXXX" autocomplete="off">
            <button class="btn" id="submit-license"><span data-i18n="submit">ÿ•ÿ±ÿ≥ÿßŸÑ</span></button>
            <div class="contact-buttons" style="margin-top:12px">
                <a href="https://t.me/najran2015" class="contact-btn telegram-btn" rel="noopener" aria-label="Telegram">
                    <i class="fab fa-telegram"></i>
                </a>
            </div>
            <p style="margin-top:15px;font-size:13px;color:var(--light)">Telegram: @najran2015</p>
        </div>
    </div>

    <!-- Terms Modal -->
    <div class="terms-modal" id="terms-modal" role="dialog" aria-modal="true">
        <div class="terms-box">
            <h3 data-i18n="tAndC">ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ</h3>
            <div class="checkbox-container">
                <input type="checkbox" id="accept-terms" required>
                <label for="accept-terms" data-i18n="accept">ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ</label>
            </div>
            <button class="btn" id="accept-terms-btn"><span data-i18n="proceed">ŸÖÿ™ÿßÿ®ÿπÿ©</span></button>
        </div>
    </div>

    <!-- Security Lock -->
    <div class="security-lock" id="security-lock">
        <div class="lock-box">
            <i class="fas fa-shield-alt" style="font-size:36px;color:var(--accent)"></i>
            <div class="lock-title" data-i18n="lockedTitle">ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÇŸÅŸÑ ÿßŸÑÿ£ŸÖŸÜŸä</div>
            <div class="lock-note" data-i18n="lockedNote">ÿ™ŸÖ ÿ±ÿµÿØ ÿ£ÿØŸàÿßÿ™ ÿßŸÑŸÖÿ∑ŸàŸëÿ± ÿ£Ÿà ÿ•ÿ¨ÿ±ÿßÿ° ŸÖÿ≠ÿ∏Ÿàÿ±.</div>
            <div class="lock-actions">
                <button class="btn" id="reload-btn" style="width:auto;padding:10px 16px">ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ</button>
                <button class="btn" id="continue-btn" style="width:auto;padding:10px 16px;background:linear-gradient(135deg,#444,#333)">ŸÖÿ™ÿßÿ®ÿπÿ©</button>
            </div>
        </div>
    </div>

    <script>
        // i18n
        const i18n = {
            en: {
                appName: "NAIF TRADING BOT",
                signals: "Signals",
                accuracy: "Accuracy",
                platform: "Trading Platform",
                marketType: "Market Type",
                live: "LIVE",
                otc: "OTC",
                pair: "Currency Pair",
                timeframe: "Time Frame",
                generate: "GENERATE SIGNAL",
                recent: "Recent Signals",
                pairLabel: "Pair:",
                tfLabel: "Time Frame:",
                confLabel: "Confidence:",
                expLabel: "Expires in:",
                platLabel: "Platform:",
                executed: "TRADE EXECUTED",
                enterKey: "ENTER LICENSE KEY",
                premiumNote: "To access premium signals",
                submit: "SUBMIT",
                tAndC: "TERMS & CONDITIONS",
                accept: "I accept the Terms & Conditions",
                proceed: "PROCEED",
                lockedTitle: "Security Lock Activated",
                lockedNote: "Devtools or forbidden action detected.",
                livePrice: "Live Price",
                lastUpdate: "Last update:",
                change: "Change",
                clocks: "Clocks",
                localTime: "Local time (your device)",
                ksaTime: "Saudi time (UTC+3)"
            },
            ar: {
                appName: "NAIF TRADING BOT",
                signals: "ÿßŸÑÿ•ÿ¥ÿßÿ±ÿßÿ™",
                accuracy: "ÿßŸÑÿØŸÇÿ©",
                platform: "ŸÖŸÜÿµÿ© ÿßŸÑÿ™ÿØÿßŸàŸÑ",
                marketType: "ŸÜŸàÿπ ÿßŸÑÿ≥ŸàŸÇ",
                live: "ÿ≠Ÿä",
                otc: "ÿÆÿßÿ±ÿ¨ ÿßŸÑÿ®Ÿàÿ±ÿµÿ©",
                pair: "ÿ≤Ÿàÿ¨ ÿßŸÑÿπŸÖŸÑÿ©",
                timeframe: "ÿßŸÑÿ•ÿ∑ÿßÿ± ÿßŸÑÿ≤ŸÖŸÜŸä",
                generate: "ÿ™ŸàŸÑŸäÿØ ÿ•ÿ¥ÿßÿ±ÿ©",
                recent: "ÿ¢ÿÆÿ± ÿßŸÑÿ•ÿ¥ÿßÿ±ÿßÿ™",
                pairLabel: "ÿßŸÑÿ≤Ÿàÿ¨:",
                tfLabel: "ÿßŸÑÿ•ÿ∑ÿßÿ±:",
                confLabel: "ÿßŸÑÿ´ŸÇÿ©:",
                expLabel: "ÿ™ŸÜÿ™ŸáŸä ÿÆŸÑÿßŸÑ:",
                platLabel: "ÿßŸÑŸÖŸÜÿµÿ©:",
                executed: "ÿ™ŸÖ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",
                enterKey: "ÿ£ÿØÿÆŸÑ ŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ",
                premiumNote: "ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑÿ•ÿ¥ÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©",
                submit: "ÿ•ÿ±ÿ≥ÿßŸÑ",
                tAndC: "ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ",
                accept: "ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ",
                proceed: "ŸÖÿ™ÿßÿ®ÿπÿ©",
                lockedTitle: "ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÇŸÅŸÑ ÿßŸÑÿ£ŸÖŸÜŸä",
                lockedNote: "ÿ™ŸÖ ÿ±ÿµÿØ ÿ£ÿØŸàÿßÿ™ ÿßŸÑŸÖÿ∑ŸàŸëÿ± ÿ£Ÿà ÿ•ÿ¨ÿ±ÿßÿ° ŸÖÿ≠ÿ∏Ÿàÿ±.",
                livePrice: "ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÑÿ≠ÿ∏Ÿä",
                lastUpdate: "ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´:",
                change: "ÿßŸÑÿ™ÿ∫Ÿäÿ±",
                clocks: "ÿßŸÑÿ≥ÿßÿπÿßÿ™",
                localTime: "ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ≠ŸÑŸä (ÿ¨Ÿáÿßÿ≤ŸÉ)",
                ksaTime: "ÿ™ŸàŸÇŸäÿ™ ÿßŸÑÿ≥ÿπŸàÿØŸäÿ© (UTC+3)"
            }
        };

        let currentLang = localStorage.getItem('ui_lang') || 'ar';
        let isLicenseValid = localStorage.getItem('isLicenseValid') === 'true';
        let isTermsAccepted = localStorage.getItem('isTermsAccepted') === 'true';
        let isMaster = localStorage.getItem('isMaster') === 'true';
        let recentSignals = JSON.parse(localStorage.getItem('recentSignals') || '[]');
        let signalCount = parseInt(localStorage.getItem('signalCount') || '286427', 10);
        let selectedPair = 'EURUSD';
        let selectedMarket = 'live'; // 'live' or 'otc'
        let wsConnection = null;
        let connectionStatus = 'disconnected';
        let lastPrice = null;
        let lastChange = 0;

        // DOM Elements
        const licenseModal = document.getElementById('license-modal');
        const licenseInput = document.getElementById('license-input');
        const submitLicense = document.getElementById('submit-license');
        const termsModal = document.getElementById('terms-modal');
        const acceptTerms = document.getElementById('accept-terms');
        const acceptTermsBtn = document.getElementById('accept-terms-btn');
        const generateBtn = document.getElementById('generate-btn');
        const signalModal = document.getElementById('signal-modal');
        const closeSignal = document.getElementById('close-signal');
        const signalList = document.getElementById('signal-list');
        const notifBadge = document.getElementById('notif-badge');
        const masterBadge = document.getElementById('master-badge');
        const securityLock = document.getElementById('security-lock');
        const reloadBtn = document.getElementById('reload-btn');
        const continueBtn = document.getElementById('continue-btn');
        const priceSymbol = document.getElementById('price-symbol');
        const priceValue = document.getElementById('price-value');
        const priceChange = document.getElementById('price-change');
        const priceTime = document.getElementById('price-time');
        const liveDot = document.getElementById('live-dot');
        const flagLeft = document.getElementById('flag-left');
        const flagRight = document.getElementById('flag-right');
        const modalFlagLeft = document.getElementById('modal-flag-left');
        const modalFlagRight = document.getElementById('modal-flag-right');
        const signalCountEl = document.getElementById('signal-count');
        const statusDot = document.getElementById('status-dot');
        const statusText = document.getElementById('status-text');
        const connectionStatusEl = document.getElementById('connection-status');
        const liveMarketBtn = document.getElementById('live-market');
        const otcMarketBtn = document.getElementById('otc-market');
        const currencyPairSelect = document.getElementById('currency-pair');

        // Apply language
        function applyLang(lang) {
            currentLang = lang;
            localStorage.setItem('ui_lang', lang);
            document.documentElement.lang = lang;
            document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
            
            const dict = i18n[lang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const k = el.getAttribute('data-i18n');
                if (dict[k]) el.textContent = dict[k];
            });
            
            document.getElementById('btn-en').classList.toggle('active', lang === 'en');
            document.getElementById('btn-ar').classList.toggle('active', lang === 'ar');
            
            const sdir = document.getElementById('signal-direction');
            if (sdir.classList.contains('signal-up')) {
                sdir.textContent = (lang === 'ar' ? 'ÿ¥ÿ±ÿßÿ°' : 'UP');
            }
            if (sdir.classList.contains('signal-down')) {
                sdir.textContent = (lang === 'ar' ? 'ÿ®Ÿäÿπ' : 'DOWN');
            }
        }

        // Update connection status
        function updateConnectionStatus(status) {
            connectionStatus = status;
            statusDot.className = 'status-dot status-' + status;
            
            if (status === 'connected') {
                statusText.textContent = currentLang === 'ar' ? 'ŸÖÿ™ÿµŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ' : 'Connected to server';
                connectionStatusEl.style.display = 'flex';
                // ÿ•ÿ∏Ÿáÿßÿ± ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ÿ≥ÿπÿßÿ± ÿπŸÜÿØ ÿßŸÑÿßÿ™ÿµÿßŸÑ
                document.querySelectorAll('.price-main, .price-sub, .price-change').forEach(el => {
                    el.style.opacity = '1';
                });
                liveDot.classList.add('dot-live');
            } else if (status === 'connecting') {
                statusText.textContent = currentLang === 'ar' ? 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ™ÿµÿßŸÑ...' : 'Connecting...';
                connectionStatusEl.style.display = 'flex';
                // ÿ•ÿÆŸÅÿßÿ° ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ÿ≥ÿπÿßÿ± ÿπŸÜÿØ ÿπÿØŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ
                document.querySelectorAll('.price-main, .price-sub, .price-change').forEach(el => {
                    el.style.opacity = '0.3';
                });
                liveDot.classList.remove('dot-live');
            } else {
                statusText.textContent = currentLang === 'ar' ? 'ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ' : 'Disconnected from server';
                connectionStatusEl.style.display = 'flex';
                // ÿ•ÿÆŸÅÿßÿ° ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ÿ≥ÿπÿßÿ± ÿπŸÜÿØ ÿπÿØŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ
                document.querySelectorAll('.price-main, .price-sub, .price-change').forEach(el => {
                    el.style.opacity = '0.3';
                });
                liveDot.classList.remove('dot-live');
                
                // ÿ•ÿ∏Ÿáÿßÿ± ÿ±ÿ≥ÿßŸÑÿ© ÿπÿØŸÖ ÿßÿ™ÿµÿßŸÑ ŸÅŸä ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ÿ≥ÿπÿßÿ±
                priceValue.textContent = '‚Äî';
                priceChange.textContent = currentLang === 'ar' ? 'ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ' : 'No server connection';
                priceTime.textContent = '';
            }
        }

        // Initialize
        function init() {
            applyLang(currentLang);
            updateSignalList();
            
            if (isMaster) {
                masterBadge.style.display = 'inline-block';
            }
            
            renderSignalCount();
            updateDisplayedPair();
            updateFlags();
            
            // Event listeners
            document.getElementById('btn-en').addEventListener('click', () => {
                applyLang('en');
                playClick();
            });
            
            document.getElementById('btn-ar').addEventListener('click', () => {
                applyLang('ar');
                playClick();
            });
            
            currencyPairSelect.addEventListener('change', (e) => {
                selectedPair = e.target.value;
                updateDisplayedPair();
                updateFlags();
                sendPairToServer();
                playClick();
            });
            
            liveMarketBtn.addEventListener('click', () => {
                liveMarketBtn.classList.add('selected');
                otcMarketBtn.classList.remove('selected');
                selectedMarket = 'live';
                updateDisplayedPair();
                sendPairToServer();
                playClick();
            });
            
            otcMarketBtn.addEventListener('click', () => {
                otcMarketBtn.classList.add('selected');
                liveMarketBtn.classList.remove('selected');
                selectedMarket = 'otc';
                updateDisplayedPair();
                sendPairToServer();
                playClick();
            });
            
            generateBtn.addEventListener('click', () => {
                if (!isLicenseValid) {
                    licenseModal.style.display = 'flex';
                    return;
                }
                if (!isTermsAccepted) {
                    termsModal.style.display = 'flex';
                    return;
                }
                showLoadingAndGenerate();
            });
            
            closeSignal.addEventListener('click', () => {
                signalModal.style.display = 'none';
            });
            
            document.querySelectorAll('.platform-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.platform-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    playClick();
                });
            });
            
            document.querySelectorAll('.time-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    playClick();
                });
            });
            
            submitLicense.addEventListener('click', () => {
                const v = (licenseInput.value || '').trim();
                if (v === '2561' || v === '4045') {
                    isLicenseValid = true;
                    isMaster = (v === '4045');
                    localStorage.setItem('isLicenseValid', 'true');
                    localStorage.setItem('isMaster', isMaster ? 'true' : 'false');
                    licenseModal.style.display = 'none';
                    termsModal.style.display = 'flex';
                    
                    if (isMaster) {
                        masterBadge.style.display = 'inline-block';
                    }
                    
                    playSuccess();
                } else {
                    licenseInput.value = '';
                    showNotification(currentLang === 'ar' ? 'ŸÖŸÅÿ™ÿßÿ≠ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠' : 'Invalid license key', 'error');
                    playError();
                }
            });
            
            acceptTermsBtn.addEventListener('click', () => {
                if (acceptTerms.checked) {
                    isTermsAccepted = true;
                    localStorage.setItem('isTermsAccepted', 'true');
                    termsModal.style.display = 'none';
                    showLoadingAndGenerate();
                }
            });
            
            notifBadge.addEventListener('click', () => {
                showNotification(currentLang === 'ar' ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™' : 'No notifications', 'info');
                playClick();
            });
            
            reloadBtn.addEventListener('click', () => location.reload());
            continueBtn.addEventListener('click', () => {
                securityLock.style.display = 'none';
            });
            
            // Try to connect to WebSocket server
            connectToServer();
        }

        // Update displayed pair based on market type
        function updateDisplayedPair() {
            let displayPair = selectedPair;
            
            if (selectedMarket === 'otc' && selectedPair.includes('')) {
                // Add "_otc" suffix for OTC market
                displayPair = selectedPair.replace('', '') + '_otc';
            }
            
            priceSymbol.textContent = displayPair;
        }

        // Send pair to server via WebSocket
        function sendPairToServer() {
            if (wsConnection && wsConnection.readyState === WebSocket.OPEN) {
                let pairToSend = selectedPair;
                
                if (selectedMarket === 'otc' && selectedPair.includes('')) {
                    // Convert to format like "EURUSD_otc"
                    pairToSend = selectedPair.replace('', '') + '_otc';
                }
                
                wsConnection.send(pairToSend);
                console.log('Sent to server:', pairToSend);
            }
        }

        // Connect to WebSocket server
        function connectToServer() {
            updateConnectionStatus('connecting');
            
            // Try to connect to the FastAPI server
            try {
                wsConnection = new WebSocket('ws://test2-production-ad18.up.railway.app/ws/prices');
                
                wsConnection.onopen = () => {
                    updateConnectionStatus('connected');
                    console.log('Connected to server');
                    // Send initial pair to server
                    sendPairToServer();
                };
                
                wsConnection.onmessage = (event) => {
                    try {
                        const data = JSON.parse(event.data);
                        updatePriceDisplay(data);
                    } catch (e) {
                        console.error('Error parsing WebSocket message:', e);
                    }
                };
                
                wsConnection.onerror = (error) => {
                    console.error('WebSocket error:', error);
                    updateConnectionStatus('disconnected');
                };
                
                wsConnection.onclose = () => {
                    console.log('WebSocket connection closed');
                    updateConnectionStatus('disconnected');
                };
            } catch (error) {
                console.error('Failed to connect to WebSocket server:', error);
                updateConnectionStatus('disconnected');
            }
        }

        // Update price display
        function updatePriceDisplay(data) {
            if (data && data.price) {
                const price = parseFloat(data.price);
                const change = lastPrice ? price - lastPrice : 0;
                const changePercent = lastPrice ? (change / lastPrice) * 100 : 0;
                
                priceValue.textContent = price.toFixed(5);
                
                const isUp = change >= 0;
                priceChange.className = 'price-change ' + (isUp ? 'up' : 'down');
                priceChange.textContent = `${isUp ? '+' : ''}${change.toFixed(5)} (${isUp ? '+' : ''}${changePercent.toFixed(2)}%)`;
                
                const now = new Date();
                priceTime.textContent = (currentLang === 'ar' ? 'ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: ' : 'Last update: ') + now.toLocaleTimeString();
                
                liveDot.classList.add('dot-live');
                
                // Store last price for change calculation
                lastPrice = price;
                lastChange = change;
            }
        }

        // Update flags based on selected pair
        function updateFlags() {
            const pair = selectedPair;
            
            if (pair === 'GOLD') {
                flagLeft.textContent = 'üü°';
                flagRight.textContent = '';
            } else if (pair === 'SILVER') {
                flagLeft.textContent = '‚ö™';
                flagRight.textContent = '';
            } else if (pair.includes('/')) {
                const [left, right] = pair.split('/');
                flagLeft.textContent = getFlagEmoji(left);
                flagRight.textContent = getFlagEmoji(right);
            } else {
                flagLeft.textContent = 'üè≥Ô∏è';
                flagRight.textContent = 'üè≥Ô∏è';
            }
        }

        // Get flag emoji for currency
        function getFlagEmoji(currency) {
            const flagMap = {
                'EUR': 'üá™üá∫',
                'USD': 'üá∫üá∏',
                'GBP': 'üá¨üáß',
                'JPY': 'üáØüáµ',
                'CHF': 'üá®üá≠',
                'AUD': 'üá¶üá∫',
                'CAD': 'üá®üá¶',
                'NZD': 'üá≥üáø',
                'TRY': 'üáπüá∑',
                'BTC': '‚Çø',
                'ETH': 'Œû'
            };
            
            return flagMap[currency] || 'üè≥Ô∏è';
        }

        // Format numbers with commas
        function formatNum(n) {
            return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        // Render signal count
        function renderSignalCount() {
            signalCountEl.textContent = formatNum(signalCount);
        }

        // Show loading and generate signal
        function showLoadingAndGenerate() {
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.inset = '0';
            overlay.style.zIndex = '99';
            overlay.style.display = 'flex';
            overlay.style.alignItems = 'center';
            overlay.style.justifyContent = 'center';
            overlay.style.background = 'rgba(0,0,0,.7)';
            
            const loadingMsg = currentLang === 'ar' ? 'Ÿäÿ¨ÿ±Ÿä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÖÿ≤ŸàÿØ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...' : 'Connecting to data provider...';
            overlay.innerHTML = `
                <div style="text-align:center;color:#fff">
                    <div style="width:50px;height:50px;border:5px solid rgba(108,92,231,.3);border-top-color:var(--primary);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 15px"></div>
                    <p>${loadingMsg}</p>
                </div>
            `;
            
            document.body.appendChild(overlay);
            
            setTimeout(() => {
                document.body.removeChild(overlay);
                generateSignal();
            }, 1000);
        }

        // Generate signal
        function generateSignal() {
            const dirUp = Math.random() > 0.5;
            const dirEl = document.getElementById('signal-direction');
            
            dirEl.className = 'signal-direction ' + (dirUp ? 'signal-up' : 'signal-down');
            dirEl.textContent = currentLang === 'ar' ? (dirUp ? 'ÿ¥ÿ±ÿßÿ°' : 'ÿ®Ÿäÿπ') : (dirUp ? 'UP' : 'DOWN');
            
            const pair = selectedPair;
            const f = flagsForPair(pair);
            
            document.getElementById('result-pair').textContent = pair;
            document.getElementById('modal-flag-left').textContent = f.left || '';
            document.getElementById('modal-flag-right').textContent = f.right || '';
            
            const time = document.querySelector('.time-btn.selected').getAttribute('data-time');
            const timeText = (time < 60) ? (time + 's') : (time < 3600 ? (time / 60) + 'm' : (time / 3600) + 'h');
            document.getElementById('result-time').textContent = timeText;
            
            const platform = document.querySelector('.platform-btn.selected').textContent.trim();
            document.getElementById('result-platform').textContent = platform;
            
            const confidence = (85 + Math.floor(Math.random() * 14)) + '%';
            document.getElementById('ai-confidence').textContent = confidence;
            
            let expirySeconds = Math.min(parseInt(time) * 2, 180);
            const expiryEl = document.getElementById('expiry-time');
            expiryEl.textContent = expirySeconds + 's';
            
            const t = setInterval(() => {
                expirySeconds--;
                expiryEl.textContent = expirySeconds + 's';
                if (expirySeconds <= 0) {
                    clearInterval(t);
                    expiryEl.textContent = currentLang === 'ar' ? 'ÿßŸÜÿ™Ÿáÿ™' : 'EXPIRED';
                }
            }, 1000);
            
            signalModal.style.display = 'flex';
            
            const stamp = new Date().toLocaleTimeString();
            const entry = {
                pair,
                direction: dirUp ? (currentLang === 'ar' ? 'ÿ¥ÿ±ÿßÿ°' : 'UP') : (currentLang === 'ar' ? 'ÿ®Ÿäÿπ' : 'DOWN'),
                time: timeText,
                confidence,
                platform,
                timestamp: stamp,
                flagL: f.left,
                flagR: f.right
            };
            
            recentSignals.unshift(entry);
            if (recentSignals.length > 5) {
                recentSignals.pop();
            }
            
            localStorage.setItem('recentSignals', JSON.stringify(recentSignals));
            updateSignalList();
            
            // Increment global counter
            signalCount += 1;
            localStorage.setItem('signalCount', String(signalCount));
            renderSignalCount();
        }

        // Get flags for pair
        function flagsForPair(pair) {
            if (pair === 'GOLD') {
                return { left: 'üü°', right: '' };
            }
            
            if (pair === 'SILVER') {
                return { left: '‚ö™', right: '' };
            }
            
            if (pair.includes('/')) {
                const [left, right] = pair.split('/');
                return { left: getFlagEmoji(left), right: getFlagEmoji(right) };
            }
            
            return { left: '', right: '' };
        }

        // Update signal list
        function updateSignalList() {
            const box = document.getElementById('signal-list');
            box.innerHTML = '';
            
            if (!recentSignals.length) {
                box.innerHTML = '<div style="text-align:center;color:rgba(255,255,255,.5;padding:10px">‚Äî</div>';
                return;
            }
            
            recentSignals.forEach(s => {
                const div = document.createElement('div');
                div.className = 'signal-item ' + (s.direction.includes('UP') || s.direction.includes('ÿ¥ÿ±ÿßÿ°') ? 'up' : 'down');
                
                div.innerHTML = `
                    <div class="signal-left">
                        <span class="flagpair">${s.flagL || ''}${s.flagR ? '/' + s.flagR : ''}</span>
                        <span class="signal-pair">${s.pair}</span>
                        <span class="signal-time">${s.timestamp}</span>
                    </div>
                    <div>
                        <span>${s.direction}</span>
                        <span>${s.confidence}</span>
                    </div>
                `;
                
                box.appendChild(div);
            });
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const n = document.createElement('div');
            n.className = 'notification ' + type;
            n.textContent = message;
            document.body.appendChild(n);
            
            setTimeout(() => {
                n.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                n.classList.remove('show');
                setTimeout(() => document.body.removeChild(n), 300);
            }, 2800);
        }

        // Audio functions
        function playClick() {
            // Simulate click sound
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                gainNode.gain.value = 0.1;
                
                oscillator.start();
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.1);
                
                setTimeout(() => {
                    oscillator.stop();
                }, 100);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        function playSuccess() {
            // Simulate success sound
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 1300;
                gainNode.gain.value = 0.1;
                
                oscillator.start();
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.3);
                
                setTimeout(() => {
                    oscillator.stop();
                }, 300);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        function playError() {
            // Simulate error sound
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 300;
                gainNode.gain.value = 0.1;
                
                oscillator.start();
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.5);
                
                setTimeout(() => {
                    oscillator.stop();
                }, 500);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
